<!DOCTYPE html>
<html lang="en">
<head>
  <style>
    html {
      text-size-adjust: 100%;
      -webkit-text-size-adjust: 100%;
    }
  </style>


  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AI Skill-Gap Generator</title>
  <script src="https://cdn.tailwindcss.com">
  </script>

</head>
<body class="min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-700 text-white flex flex-col items-center justify-center p-6">

  <!-- Header -->
  <div class="text-center mb-10">
    <h1 class="text-4xl font-bold mb-2">üß† AI Skill-Gap Generator</h1>
    <p class="text-gray-300">Discover missing skills and project ideas tailored to your role.</p>
  </div>

  <!-- Form Card -->
  <div class="bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl p-8 w-full max-w-2xl">
    <form id="recommendForm" class="flex flex-col gap-4">
      <div>
        <label for="skills" class="block mb-2 text-gray-200">Enter your skills (comma separated)</label>
        <input id="skills" type="text" placeholder="e.g. HTML, CSS"
          class="w-full rounded-lg px-4 py-2 bg-white/20 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-400">
      </div>

      <div>
        <label for="role" class="block mb-2 text-gray-200">Select your role</label>
        <select id="role"
          class="w-full rounded-lg px-4 py-2 bg-slate-800 text-white focus:outline-none focus:ring-2 focus:ring-blue-400">
          <option value="">--Choose a role--</option>
          <option value="Web Developer">Web Developer</option>
          <option value="Data Scientist">Data Scientist</option>
          <option value="Mobile Developer">Mobile Developer</option>
        </select>
      </div>

      <button type="submit"
        class="mt-4 bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 rounded-lg transition">
        Get Recommendations
      </button>
    </form>
  </div>

  <!-- Loader -->
  <div id="loading" class="hidden mt-6">
    <div class="animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-blue-500 mx-auto"></div>
    <p class="text-gray-300 mt-3">Analyzing your skills...</p>
  </div>

  <!-- Output Section -->
  <div id="results" class="hidden bg-white/10 backdrop-blur-md rounded-2xl shadow-xl mt-8 p-8 w-full max-w-3xl">
    <h2 class="text-2xl font-bold mb-4 text-blue-400">Your Recommendations</h2>

    <div id="missingSkills" class="mb-4"></div>
    <div id="recommendedProjects" class="mb-4"></div>
    <div id="starterProjects" class="mb-4"></div>
    <div id="ai_projects" class="mb-4"></div>
  </div>

  <script>
  const form = document.getElementById('recommendForm');
  const loading = document.getElementById('loading');
  const results = document.getElementById('results');

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    results.classList.add('hidden');
    loading.classList.remove('hidden');

    const skills = document.getElementById('skills').value.split(',').map(s => s.trim());
    const role = document.getElementById('role').value;

    try {
      const response = await fetch('http://127.0.0.1:5000/api/recommend', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ skills, role })
      });

      const data = await response.json();

      // üî∏ Missing Skills Card
      document.getElementById('missingSkills').innerHTML =
        `<div class="mb-4 p-4 bg-yellow-100 text-yellow-800 rounded-lg shadow">
           <h3 class="font-semibold text-lg mb-2">‚ö†Ô∏è Missing Skills</h3>
           <ul class="list-disc list-inside">${data.missing_skills.map(skill => `<li>${skill}</li>`).join('')}</ul>
         </div>`;

      // üîπ Recommended Projects Card
      document.getElementById('recommendedProjects').innerHTML =
        `<div class="mb-4 p-4 bg-blue-100 text-blue-800 rounded-lg shadow">
           <h3 class="font-semibold text-lg mb-2">üí° Suggested Projects</h3>
           <ul class="list-disc list-inside">${data.recommended_projects.map(p => `<li>${p.skill}: ${p.project}</li>`).join('')}</ul>
         </div>`;

      // üü£ Starter Projects Card
      document.getElementById('starterProjects').innerHTML =
        `<div class="mb-4 p-4 bg-purple-100 text-purple-800 rounded-lg shadow">
           <h3 class="font-semibold text-lg mb-2">üöÄ Starter Projects</h3>
           <ul class="list-disc list-inside">${(data.starter_projects || []).map(zip => {
             const filename = zip.split('\\').pop();
             return `<li><a href="file:///${zip.replace(/\\/g, '/')}" download="${filename}" class="underline">${filename}</a></li>`;
           }).join('')}</ul>
         </div>`;
      // üü¢ AI Project Ideas Car
      if (data.ai_projects && data.ai_projects.length > 0) {
        document.getElementById('ai_projects').innerHTML =
          `<div class="mb-4 p-4 bg-green-100 text-green-800 rounded-lg shadow">
             <h3 class="font-semibold text-lg mb-2">ü§ñ AI Project Ideas</h3>
             <ul class="list-disc list-inside">${data.ai_projects.map(idea => `<li>${idea}</li>`).join('')}</ul>
           </div>`;
      } else {
        document.getElementById('ai_projects').innerHTML = '';
      }

    

      // Reveal results
      loading.classList.add('hidden');
      results.classList.remove('hidden');
      results.classList.add('transition-opacity', 'duration-500', 'opacity-100');
    } catch (error) {
      loading.classList.add('hidden');
      alert('Error fetching recommendations.');
    }
  });
  
</script>
</body>
</html>